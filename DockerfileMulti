# Stage 1: Build the binary
FROM rust:latest as builder

# Set the working directory
WORKDIR /workspace

# Copy the source code
COPY . /workspace

# Compile the application
RUN cargo build --release

# Stage 2: Create the final image
FROM debian:buster-slim

# Set the working directory
WORKDIR /workspace

# Copy the compiled binary from the builder stage
COPY --from=builder /workspace/target/release/ .

# Command to run the binary
CMD ["./weather-stats"]
